# temp-chat

## 我的想法
 * 匿名聊天，不需要账号
 * 每个聊天都是在房间里进行的     
 * 每个人都有一个房间   
 * 可以分享房间码等 邀请别人加入聊天      
 * 服务端不存储任何消息，仅作转发
 * 由于服务端不存储消息，所以两个人必须同时在线时，才能发送消息

## 后端实现
通过webSocket实现，     
打开一个聊天界面，就相当于开了个聊天室（连接一个`webSocket`）,连接成功服务端会返回房间唯一id，**（也可由客户端创建roomid，待讨论）**

后续发送消息都需携带上roomid来确定在那个聊天室里

每条消息为`json`格式,字段如下（暂定）:  
```js
{
  roomid:'test'  String       // 房间id
  type:'text' || 'connect'   String       // 消息类型，当前先支持文本消息（text）
  data:'hello'   String       // 消息内容
  from:'lxhyl',  String       // 谁发送的
  date:1636574963351  Int     // 发送消息的时间戳
}
```



# v0.1说明

ws地址`114.132.210.203:5002`  
发送消息的字段：`roomid`由客户端自定义且是必须的，其他字段和上述一致。

当第一次连接上`webSocket`时，客户端应发送一条空消息告知服务端当前连接的`roomid`.     
参数如下:
```js
{
  roomid // 房间id，必须
  type:'connect'，// 消息类型：初次连接
}
```

此后当服务器收到消息时，会将收到的消息广播给所有`roomid`和此消息`roomid`一致的`webSocket`连接。



**测试网页端**   

`http://114.132.210.203/chat/`

我的客户端实现是，直接进入此网站，会进入默认房间.     
进入其他房间只需要给url加上room参数，eg:`http://114.132.210.203/chat/?room=test`会进入test房间。